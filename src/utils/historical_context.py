import pandas as pd
import numpy as np
import plotly.express as px
import plotly.graph_objects as go
import streamlit as st

# База данных исторических кризисов
historical_crisis_context = {
    "financial_crisis_2008": {
        "name": "Финансовый кризис 2008-2009",
        "period": "Сентябрь 2008 - Март 2009",
        "trigger_events": [
            "Крах Lehman Brothers 15 сентября 2008",
            "Кризис на рынке субстандартной ипотеки",
            "Проблемы с ликвидностью в банковской системе"
        ],
        "key_indicators": [
            {"name": "Спред TED (разница между LIBOR и казначейскими векселями)", "value": "4.58%",
             "normal": "0.1-0.5%"},
            {"name": "VIX (индекс волатильности)", "value": "80.86", "normal": "15-20"},
            {"name": "Спред высокодоходных облигаций", "value": "21.82%", "normal": "3-5%"}
        ],
        "market_impact": {
            "S&P 500": "-56.8%",
            "MSCI World": "-54.0%",
            "US Real Estate": "-78.0%",
            "Oil": "-75.9%",
            "Gold": "+25.0%"
        },
        "policy_response": [
            "Снижение ставки ФРС до 0-0.25%",
            "Программа выкупа активов (QE1)",
            "Программа помощи проблемным активам (TARP)"
        ],
        "lessons_learned": [
            "Важность контроля над кредитным плечом финансовых институтов",
            "Необходимость прозрачности на рынках деривативов",
            "Системные риски в финансовой системе требуют системного надзора"
        ],
        "early_warning_signs": [
            "Резкий рост цен на недвижимость (пузырь)",
            "Расширение кредитования ненадежным заёмщикам",
            "Чрезмерная секьюритизация ипотечных кредитов",
            "Высокий леверидж в финансовой системе"
        ],
        "most_resilient_assets": [
            "Казначейские облигации США",
            "Японская иена",
            "Золото",
            "Компании с низким уровнем долга и стабильными денежными потоками"
        ],
        "most_affected_assets": [
            "Финансовый сектор (особенно банки и страховые компании)",
            "Недвижимость и компании, связанные с недвижимостью",
            "Циклические потребительские товары",
            "Малые компании с высоким уровнем долга"
        ]
    },
    "covid_2020": {
        "name": "Пандемия COVID-19",
        "period": "Февраль 2020 - Март 2020",
        "trigger_events": [
            "Распространение коронавируса за пределы Китая",
            "Объявление пандемии ВОЗ 11 марта 2020",
            "Массовые локдауны и прекращение экономической активности"
        ],
        "key_indicators": [
            {"name": "VIX (индекс волатильности)", "value": "82.69", "normal": "15-20"},
            {"name": "Индекс экономической неопределённости", "value": "950", "normal": "100-150"},
            {"name": "Спред корпоративных облигаций", "value": "10.87%", "normal": "1-3%"}
        ],
        "market_impact": {
            "S&P 500": "-33.9%",
            "MSCI World": "-34.0%",
            "Oil": "-65.0%",
            "Gold": "-12.0% (временно, затем рост)"
        },
        "policy_response": [
            "Снижение ставки ФРС до 0-0.25%",
            "Масштабные программы количественного смягчения",
            "Пакеты финансовой помощи (CARES Act в США)",
            "Глобальная монетарная и фискальная поддержка"
        ],
        "lessons_learned": [
            "Важность диверсификации цепочек поставок",
            "Необходимость устойчивых бизнес-моделей и сильных балансов",
            "Критическая роль правительственной поддержки в системных кризисах",
            "Ускорение цифровой трансформации"
        ],
        "early_warning_signs": [
            "Распространение вируса в Китае",
            "Нарушение цепочек поставок",
            "Предупреждения от эпидемиологов"
        ],
        "most_resilient_assets": [
            "Технологические компании (особенно связанные с удаленной работой)",
            "Фармацевтика и здравоохранение",
            "Компании электронной коммерции",
            "Казначейские облигации США"
        ],
        "most_affected_assets": [
            "Авиакомпании и туристический сектор",
            "Традиционная розничная торговля",
            "Энергетический сектор",
            "Банки и финансовые учреждения"
        ]
    },
    "tech_bubble_2000": {
        "name": "Крах доткомов",
        "period": "Март 2000 - Октябрь 2002",
        "trigger_events": [
            "Достижение пика NASDAQ 10 марта 2000",
            "Судебное решение против Microsoft в антимонопольном деле",
            "Переоценка интернет-компаний без доходов"
        ],
        "key_indicators": [
            {"name": "P/E NASDAQ", "value": ">200", "normal": "15-25"},
            {"name": "Количество IPO технологических компаний", "value": "рекордно высокое", "normal": "умеренное"},
            {"name": "Доля технологий в S&P 500", "value": "33%", "normal": "15-20%"}
        ],
        "market_impact": {
            "NASDAQ": "-78.0%",
            "S&P 500": "-49.1%",
            "Технологический сектор": "-83.0%"
        },
        "policy_response": [
            "Снижение ставки ФРС с 6.5% до 1.75%",
            "Фискальные стимулы (снижение налогов)"
        ],
        "lessons_learned": [
            "Опасность инвестирования на основе спекулятивных оценок",
            "Важность устойчивых бизнес-моделей и реальных доходов",
            "Риски концентрации в одном секторе"
        ],
        "early_warning_signs": [
            "Стремительный рост оценок без соответствующего роста доходов",
            "Резкое увеличение числа IPO убыточных компаний",
            "Быстрый рост маржинального кредитования"
        ],
        "most_resilient_assets": [
            "Ценные бумаги с фиксированным доходом",
            "Защитные секторы (здравоохранение, коммунальные услуги)",
            "Стоимостные акции",
            "Недвижимость"
        ],
        "most_affected_assets": [
            "Интернет-компании и доткомы",
            "Телекоммуникационный сектор",
            "Производители компьютерного оборудования",
            "Компании-поставщики B2B решений"
        ]
    },
    "inflation_shock": {
        "name": "Инфляционный шок 2021-2022",
        "period": "Конец 2021 - 2022",
        "trigger_events": [
            "Восстановление спроса после пандемии",
            "Нарушения в цепочках поставок",
            "Энергетический кризис",
            "Масштабные фискальные и монетарные стимулы"
        ],
        "key_indicators": [
            {"name": "Инфляция в США (CPI)", "value": "9.1%", "normal": "2-3%"},
            {"name": "Цены на энергоносители", "value": "+76%", "normal": "±5-10%"},
            {"name": "Индекс цен производителей", "value": "11.3%", "normal": "1-3%"}
        ],
        "market_impact": {
            "S&P 500": "-20.0%",
            "Облигации (AGG)": "-17.0%",
            "NASDAQ": "-33.0%",
            "Золото": "-10.0%"
        },
        "policy_response": [
            "Повышение ставок ФРС (2.25%-4.5% за год)",
            "Сокращение баланса ФРС (количественное ужесточение)",
            "Схожие действия других центральных банков"
        ],
        "lessons_learned": [
            "Уязвимость глобальных цепочек поставок",
            "Риски одновременных фискальных и монетарных стимулов",
            "Важность подготовки к инфляционным периодам",
            "Двойной удар по портфелям 60/40 (одновременное падение акций и облигаций)"
        ],
        "early_warning_signs": [
            "Рост цен на сырье",
            "Задержки в цепочках поставок",
            "Рекордный рост денежной массы (M2)",
            "Рекордно низкие процентные ставки при восстановлении экономики"
        ],
        "most_resilient_assets": [
            "Энергетический сектор",
            "Сырьевые товары",
            "Ценные бумаги с защитой от инфляции (TIPS)",
            "Стоимостные акции с ценовой силой"
        ],
        "most_affected_assets": [
            "Технологические и растущие акции",
            "Долгосрочные облигации",
            "Компании с низкой прибыльностью или высокими затратами на энергию",
            "Акции роста с высокими мультипликаторами"
        ]
    }
}


def display_historical_context(scenario_key):
    """Отображает подробный исторический контекст для выбранного сценария"""

    if scenario_key not in historical_crisis_context:
        st.warning(f"Исторический контекст для сценария {scenario_key} отсутствует.")
        return

    context = historical_crisis_context[scenario_key]

    st.subheader(f"Исторический контекст: {context['name']}")

    # Основная информация
    st.write(f"**Период:** {context['period']}")

    # Триггерные события
    st.subheader("Ключевые события, запустившие кризис")
    for event in context['trigger_events']:
        st.markdown(f"- {event}")

    # Ключевые индикаторы
    st.subheader("Ключевые индикаторы")

    indicators_df = pd.DataFrame({
        'Индикатор': [i['name'] for i in context['key_indicators']],
        'Значение во время кризиса': [i['value'] for i in context['key_indicators']],
        'Нормальное значение': [i['normal'] for i in context['key_indicators']]
    })

    st.dataframe(indicators_df, use_container_width=True)

    # Влияние на рынок
    st.subheader("Влияние на рынки")

    impact_data = []
    for market, change in context['market_impact'].items():
        impact_data.append({
            'Рынок/Актив': market,
            'Изменение': change
        })

    impact_df = pd.DataFrame(impact_data)

    # Создаем диаграмму воздействия, если возможно преобразовать изменения в числа
    try:
        # Пытаемся извлечь числовые значения из строк изменений
        numeric_changes = []
        for change in impact_df['Изменение']:
            # Удаляем знаки % и +, оставляем только числа и минус при наличии
            clean_change = change.replace('%', '').replace('+', '')
            # Отделяем числовую часть, если есть скобки или текст
            if '(' in clean_change:
                clean_change = clean_change.split('(')[0].strip()

            try:
                numeric_changes.append(float(clean_change))
            except ValueError:
                # Если не удается преобразовать в число, добавляем 0
                numeric_changes.append(0)

        # Создаем диаграмму
        fig_impact = px.bar(
            impact_df,
            x='Рынок/Актив',
            y=numeric_changes,
            color=numeric_changes,
            color_continuous_scale='RdYlGn',
            title='Влияние на рынки',
            labels={'y': 'Изменение (%)'}
        )

        fig_impact.update_traces(
            texttemplate='%{y}%',
            textposition='outside'
        )

        st.plotly_chart(fig_impact, use_container_width=True)

    except Exception as e:
        # Если не удалось создать диаграмму, просто показываем таблицу
        st.warning(f"Не удалось создать диаграмму: {e}")
        st.dataframe(impact_df, use_container_width=True)

    # Два столбца для остальной информации
    col1, col2 = st.columns(2)

    with col1:
        # Ответные меры
        st.subheader("Ответные меры регуляторов")
        for policy in context['policy_response']:
            st.markdown(f"- {policy}")

        # Наиболее устойчивые активы
        st.subheader("Наиболее устойчивые активы")
        for asset in context['most_resilient_assets']:
            st.markdown(f"- {asset}")

    with col2:
        # Извлеченные уроки
        st.subheader("Извлеченные уроки")
        for lesson in context['lessons_learned']:
            st.markdown(f"- {lesson}")

        # Наиболее пострадавшие активы
        st.subheader("Наиболее пострадавшие активы")
        for asset in context['most_affected_assets']:
            st.markdown(f"- {asset}")

    # Ранние предупреждающие знаки
    st.subheader("Ранние предупреждающие знаки")
    for sign in context['early_warning_signs']:
        st.markdown(f"- {sign}")

    # Индикаторы, которые могут предсказать подобный кризис
    st.subheader("Что отслеживать сегодня")

    st.info("""
    Следующие индикаторы могут помочь выявить похожие условия в текущей экономике:

    1. **Рыночная оценка**: Экстремальные уровни P/E, особенно в определенных секторах
    2. **Кредитные спреды**: Расширение спредов может указывать на растущий стресс
    3. **Индекс волатильности (VIX)**: Длительные периоды низкой волатильности, сменяющиеся резкими скачками
    4. **Рычаги (леверидж)**: Значительное увеличение корпоративного и потребительского долга
    5. **Рыночный сентимент**: Чрезмерный оптимизм или страх в настроениях инвесторов
    """)

    # Современные параллели (если есть)
    if 'current_parallels' in context:
        st.subheader("Современные параллели")
        for parallel in context['current_parallels']:
            st.markdown(f"- {parallel}")


def historical_analogy_page():
    """Страница исторических аналогий для текущего состояния рынка"""

    st.title("Исторические аналогии")

    st.write("""
    На этой странице мы сравниваем текущую рыночную ситуацию с историческими периодами, 
    чтобы выявить возможные аналогии и извлечь уроки из прошлого.
    """)

    # Выбор текущего рыночного режима
    current_regime = st.selectbox(
        "Текущий рыночный режим",
        [
            "Поздняя фаза бычьего рынка с высокими оценками",
            "Начало медвежьего рынка",
            "Середина медвежьего рынка",
            "Конец медвежьего рынка",
            "Начало бычьего рынка",
            "Рост инфляции и процентных ставок",
            "Экономическая рецессия",
            "Геополитическая напряженность"
        ]
    )

    # Определение исторических аналогий в зависимости от выбранного режима
    historical_analogies = {
        "Поздняя фаза бычьего рынка с высокими оценками": [
            {"period": "1999-2000", "event": "Пузырь доткомов", "similarity": 0.85},
            {"period": "2007", "event": "Перед финансовым кризисом 2008", "similarity": 0.75},
            {"period": "1972", "event": "Перед нефтяным кризисом", "similarity": 0.65}
        ],
        "Начало медвежьего рынка": [
            {"period": "Q4 2007", "event": "Начало финансового кризиса", "similarity": 0.8},
            {"period": "Q1 2000", "event": "Начало краха доткомов", "similarity": 0.7},
            {"period": "Q4 1972", "event": "Перед нефтяным кризисом", "similarity": 0.6}
        ],
        "Середина медвежьего рынка": [
            {"period": "2008", "event": "Финансовый кризис", "similarity": 0.75},
            {"period": "2001", "event": "Крах доткомов", "similarity": 0.7},
            {"period": "1973-1974", "event": "Нефтяной кризис", "similarity": 0.65}
        ],
        "Конец медвежьего рынка": [
            {"period": "Q1 2009", "event": "Окончание финансового кризиса", "similarity": 0.8},
            {"period": "Q4 2002", "event": "Окончание краха доткомов", "similarity": 0.75},
            {"period": "1974", "event": "Окончание нефтяного кризиса", "similarity": 0.6}
        ],
        "Начало бычьего рынка": [
            {"period": "2009-2010", "event": "После финансового кризиса", "similarity": 0.85},
            {"period": "2003", "event": "После краха доткомов", "similarity": 0.7},
            {"period": "1975", "event": "После нефтяного кризиса", "similarity": 0.6}
        ],
        "Рост инфляции и процентных ставок": [
            {"period": "1970-1980", "event": "Десятилетие высокой инфляции", "similarity": 0.8},
            {"period": "1994", "event": "Повышение ставок ФРС", "similarity": 0.7},
            {"period": "2021-2022", "event": "Пост-пандемическая инфляция", "similarity": 0.9}
        ],
        "Экономическая рецессия": [
            {"period": "2008-2009", "event": "Великая рецессия", "similarity": 0.7},
            {"period": "2001-2002", "event": "Рецессия после доткомов", "similarity": 0.6},
            {"period": "1990-1991", "event": "Рецессия начала 90-х", "similarity": 0.5}
        ],
        "Геополитическая напряженность": [
            {"period": "2022", "event": "Конфликт Россия-Украина", "similarity": 0.85},
            {"period": "2001", "event": "9/11 и последствия", "similarity": 0.6},
            {"period": "1990", "event": "Вторжение Ирака в Кувейт", "similarity": 0.5}
        ]
    }

    if current_regime in historical_analogies:
        st.subheader(f"Исторические аналогии для режима: {current_regime}")

        # Отображаем аналогии в виде таблицы
        analogy_df = pd.DataFrame(historical_analogies[current_regime])
        analogy_df['similarity'] = analogy_df['similarity'] * 100  # Преобразуем в проценты

        # Визуализация сходства исторических аналогий
        fig_analogy = px.bar(
            analogy_df,
            x='period',
            y='similarity',
            color='similarity',
            color_continuous_scale='Viridis',
            text='event',
            title='Исторические аналогии и их сходство с текущей ситуацией',
            labels={'period': 'Исторический период', 'similarity': 'Сходство (%)', 'event': 'Событие'}
        )

        fig_analogy.update_traces(textposition='outside')
        fig_analogy.update_layout(uniformtext_minsize=10, uniformtext_mode='hide')

        st.plotly_chart(fig_analogy, use_container_width=True)

        # Выбор исторического события для детального изучения
        selected_period = st.selectbox(
            "Выберите исторический период для детального изучения",
            options=analogy_df['period'].tolist(),
            format_func=lambda x: f"{x} - {analogy_df[analogy_df['period'] == x]['event'].values[0]}"
        )

        # Показываем таблицу с извлеченными уроками
        historical_lessons = {
            "1970-1980": [
                "Инфляция может сохраняться дольше, чем ожидается",
                "Реальные активы превосходят финансовые активы во время высокой инфляции",
                "Небольшие повышения ставок редко останавливают устоявшуюся инфляцию"
            ],
            "1990-1991": [
                "Геополитические шоки могут иметь краткосрочные, но сильные рыночные последствия",
                "Высококачественные облигации и защитные акции предлагают лучшую защиту"
            ],
            "1994": [
                "Внезапное повышение ставок может сильно повлиять на рынки облигаций",
                "Короткая дюрация и плавающие ставки помогают защитить портфель облигаций"
            ],
            "1999-2000": [
                "Высокие оценки требуют высоких темпов роста для оправдания",
                "Концентрация в одном секторе значительно увеличивает риск",
                "Важность реальных прибылей, а не просто роста выручки"
            ],
            "Q1 2000": [
                "Пузыри обычно сдуваются быстрее, чем надуваются",
                "Первая волна падения часто сменяется временным отскоком"
            ],
            "2001": [
                "Геополитические шоки могут ускорить уже начавшиеся рыночные тренды",
                "Низкие оценки не защищают от краткосрочных шоков"
            ],
            "2001-2002": [
                "Медвежьи рынки часто имеют несколько волн",
                "Ложные ралли могут имитировать начало восстановления"
            ],
            "Q4 2002": [
                "Рыночное дно часто формируется при максимальном пессимизме",
                "Лидеры предыдущего цикла редко становятся лидерами нового цикла"
            ],
            "2003": [
                "Новые бычьи рынки часто начинаются при плохих экономических новостях",
                "Более рискованные активы обычно лидируют в начале нового цикла"
            ],
            "2007": [
                "Низкая волатильность часто предшествует серьезным кризисам",
                "Кредитные спреды часто являются лучшим индикатором, чем фондовые индексы"
            ],
            "Q4 2007": [
                "Финансовые акции часто первыми показывают признаки проблем",
                "Расширение кредитных спредов - ранний индикатор проблем"
            ],
            "2008": [
                "Корреляции активов стремятся к 1 в периоды серьезных кризисов",
                "Сохранение ликвидности критически важно в серьезных кризисах"
            ],
            "2008-2009": [
                "Слишком большой леверидж может разрушить даже качественные активы",
                "Восстановление экономики часто отстает от восстановления рынка"
            ],
            "Q1 2009": [
                "Рыночное дно часто происходит до прекращения плохих экономических новостей",
                "Экстремально высокая волатильность может сигнализировать о приближении дна"
            ],
            "2009-2010": [
                "Ранние стадии бычьего рынка обычно сильные, но с откатами",
                "Низкокачественные, более рискованные акции часто лидируют в начале подъема"
            ],
            "1990": [
                "Нефтяные шоки могут иметь каскадный эффект на всю экономику",
                "Защитные секторы предлагают относительную безопасность"
            ],
            "1973-1974": [
                "Комбинация геополитических шоков и инфляции особенно разрушительна",
                "Диверсификация за пределами традиционных классов активов важна"
            ],
            "1974": [
                "Лучшие инвестиционные возможности часто появляются в моменты максимального страха",
                "Акции стоимости обычно лучше защищены в конце медвежьего рынка"
            ],
            "1975": [
                "Восстановление может быть быстрым и сильным после глубоких распродаж",
                "Инфляционные активы могут продолжать работать даже после пика инфляции"
            ],
            "1972": [
                "Низкая безработица и высокий рост часто предшествуют инфляции",
                "Ценовые пузыри на активах могут формироваться даже при умеренной инфляции"
            ],
            "2021-2022": [
                "Инфляционный шок может одновременно ударить по акциям и облигациям",
                "Стоимостные акции могут превзойти акции роста в периоды роста инфляции",
                "Корреляция между акциями и облигациями может стать положительной"
            ],
            "2022": [
                "Энергетические кризисы особенно тяжелы для импортеров энергии",
                "Геополитические риски часто недооцениваются рынками до тех пор, пока не материализуются",
                "Сырьевые товары могут служить хеджированием от геополитических рисков"
            ]
        }

        if selected_period in historical_lessons:
            st.subheader(f"Уроки из периода {selected_period}")
            for lesson in historical_lessons[selected_period]:
                st.markdown(f"- {lesson}")

            # Рекомендации для текущей стратегии
            st.subheader("Рекомендации для текущей инвестиционной стратегии")

            recommendations = {
                "1970-1980": [
                    "Увеличить долю реальных активов (товары, недвижимость, TIPS)",
                    "Сократить долю долгосрочных облигаций",
                    "Отдавать предпочтение компаниям с сильной ценовой силой"
                ],
                "1990-1991": [
                    "Увеличить аллокацию в высококачественные облигации",
                    "Отдавать предпочтение компаниям с низким уровнем долга",
                    "Рассмотреть защитные секторы (коммунальные услуги, потребительские товары)"
                ],
                "1994": [
                    "Сократить дюрацию облигаций",
                    "Рассмотреть облигации с плавающей ставкой",
                    "Увеличить долю денежных средств для будущих возможностей"
                ],
                "1999-2000": [
                    "Ребалансировать портфель от перегретых секторов",
                    "Увеличить долю стоимостных акций",
                    "Снизить концентрацию в технологическом секторе"
                ],
                "Q1 2000": [
                    "Увеличить качество портфеля (компании с сильными балансами)",
                    "Избегать ложных отскоков",
                    "Постепенно наращивать позиции в защитных секторах"
                ],
                "2001": [
                    "Увеличить долю денежных средств",
                    "Рассмотреть хеджирующие стратегии",
                    "Сократить экспозицию к циклическим секторам"
                ],
                "2001-2002": [
                    "Диверсифицировать портфель",
                    "Избегать компаний с высоким долгом",
                    "Фокусироваться на уровнях валюации, а не на моментуме"
                ],
                "Q4 2002": [
                    "Начать постепенно увеличивать долю акций",
                    "Искать компании с сильными моделями и низкими оценками",
                    "Рассмотреть малые компании для долгосрочных инвестиций"
                ],
                "2003": [
                    "Увеличить долю циклических секторов",
                    "Рассмотреть международные рынки, особенно развивающиеся",
                    "Сократить долю денежных средств"
                ],
                "2007": [
                    "Сократить экспозицию к финансовому сектору",
                    "Увеличить качество кредитных инструментов",
                    "Подготовиться к росту волатильности"
                ],
                "Q4 2007": [
                    "Увеличить долю денежных средств",
                    "Сократить экспозицию к высоко-бета активам",
                    "Рассмотреть защитные активы (золото, казначейские облигации)"
                ],
                "2008": [
                    "Сохранять существенную часть портфеля в денежных средствах",
                    "Отдавать предпочтение ликвидным инструментам",
                    "Избегать использования кредитного плеча"
                ],
                "2008-2009": [
                    "Фокусироваться на компаниях с низким долгом",
                    "Избегать секторов, зависящих от потребительского кредитования",
                    "Постепенно увеличивать позиции в качественных акциях"
                ],
                "Q1 2009": [
                    "Начинать постепенно увеличивать экспозицию к рынку акций",
                    "Искать акции с экстремально низкими оценками",
                    "Рассмотреть корпоративные облигации с высоким рейтингом"
                ],
                "2009-2010": [
                    "Увеличить долю циклических секторов",
                    "Рассмотреть малые компании",
                    "Сократить долю защитных активов"
                ],
                "1990": [
                    "Хеджировать энергетические риски",
                    "Увеличить долю защитных секторов",
                    "Рассмотреть активы, связанные с безопасностью"
                ],
                "1973-1974": [
                    "Увеличить долю реальных активов",
                    "Сократить долю облигаций",
                    "Отдавать предпочтение компаниям с стабильными денежными потоками"
                ],
                "1974": [
                    "Постепенно увеличивать экспозицию к акциям",
                    "Фокусироваться на стоимостных акциях",
                    "Искать компании с сильными балансами"
                ],
                "1975": [
                    "Увеличить долю циклических секторов",
                    "Рассмотреть малые компании",
                    "Сохранять часть портфеля в реальных активах"
                ],
                "1972": [
                    "Подготовиться к росту инфляции",
                    "Сократить долю акций роста с высокими мультипликаторами",
                    "Рассмотреть реальные активы как защиту"
                ],
                "2021-2022": [
                    "Сократить долю долгосрочных облигаций",
                    "Увеличить долю стоимостных акций",
                    "Рассмотреть активы с защитой от инфляции (TIPS, товары)"
                ],
                "2022": [
                    "Диверсифицировать энергетические источники",
                    "Рассмотреть компании в оборонном секторе",
                    "Увеличить долю товарных активов"
                ]
            }

            if selected_period in recommendations:
                for recommendation in recommendations[selected_period]:
                    st.markdown(f"- {recommendation}")